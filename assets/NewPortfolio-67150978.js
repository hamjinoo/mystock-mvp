import{r as e,j as s}from"./react-265ec861.js";import{L as t}from"./index-65335e1b.js";import{A as a}from"./accountService-26154c96.js";import{P as r}from"./portfolioService-3819a654.js";import{b as c}from"./vendor-936e0d4d.js";import"./dexie-e331f4d1.js";import"./router-a48e489e.js";const n={LONG_TERM:{name:"장기 투자",description:"3년 이상의 장기 투자 포트폴리오"},MID_TERM:{name:"중기 투자",description:"1~3년의 중기 투자 포트폴리오"},SHORT_TERM:{name:"단기 투자",description:"1년 미만의 단기 투자 포트폴리오"},UNCATEGORIZED:{name:"미분류",description:"투자 기간이 정해지지 않은 포트폴리오"},CUSTOM:{name:"직접 입력",description:"투자 기간을 직접 설정"}},i=()=>{const i=c(),[l,o]=e.useState(""),[d,m]=e.useState("LONG_TERM"),[x,u]=e.useState(""),[p,h]=e.useState(!0),[b,j]=e.useState("");e.useEffect((()=>{y()}),[]);const y=async()=>{try{0===(await a.getAll()).length&&j("계좌가 없습니다. 먼저 계좌를 생성해주세요.")}catch(e){j("계좌 정보를 불러올 수 없습니다.")}finally{h(!1)}};return p?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(t,{})})}):b?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"새 포트폴리오"}),s.jsx("p",{className:"text-red-400 mb-4",children:b}),s.jsx("button",{onClick:()=>i("/accounts/new"),className:"px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"새 계좌 등록하기"})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("h1",{className:"text-2xl font-bold mb-8",children:"새 포트폴리오"}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const e=await a.getAll();if(0===e.length)return alert("계좌가 없습니다. 먼저 계좌를 생성해주세요."),void i("/accounts/new");const s=e[0],t={name:l.trim(),accountId:s.id,currency:s.currency,config:{targetAllocation:0,period:"CUSTOM"===d?"UNCATEGORIZED":d,description:"CUSTOM"===d?x:n[d].description,totalCapital:0}};await r.create(t),i("/portfolios")}catch(s){alert("포트폴리오 생성에 실패했습니다.")}},className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"포트폴리오명"}),s.jsx("input",{type:"text",value:l,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 bg-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"예: 성장주 포트폴리오, 배당주 포트폴리오",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-4",children:"투자 기간"}),s.jsx("div",{className:"space-y-4",children:Object.keys(n).map((e=>{const t=n[e];return s.jsxs("div",{className:"p-4 rounded cursor-pointer border-2 "+(d===e?"border-blue-500 bg-gray-800":"border-gray-700 bg-gray-800 hover:border-gray-600"),onClick:()=>m(e),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"period",checked:d===e,onChange:()=>m(e),className:"mr-2"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:t.name}),s.jsx("p",{className:"text-sm text-gray-400",children:t.description})]})]}),"CUSTOM"===e&&"CUSTOM"===d&&s.jsxs("div",{className:"mt-3",children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"설명"}),s.jsx("input",{type:"text",value:x,onChange:e=>u(e.target.value),className:"w-full px-3 py-1 bg-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"투자 전략에 대한 설명을 입력하세요",required:"CUSTOM"===d})]})]},e)}))})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:()=>i("/portfolios"),className:"px-6 py-2 text-gray-400 hover:text-gray-300",children:"취소"}),s.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",disabled:!l.trim()||"CUSTOM"===d&&!x.trim(),children:"생성"})]})]})]})})};export{i as NewPortfolioPage,i as default};
//# sourceMappingURL=NewPortfolio-67150978.js.map
