import{j as e,L as s,a as t}from"./index-e48b942e.js";import{e as a,u as r,r as l,L as i}from"./react-2981e50d.js";import{P as c}from"./portfolioService-309953aa.js";import{f as n}from"./currencyUtils-b432909e.js";import{A as d}from"./ArrowLeftIcon-57afa31b.js";import{S as m}from"./ShieldCheckIcon-3f143148.js";import{C as o}from"./CalendarDaysIcon-f532a94c.js";import{a as x,b as h,c as j,C as u,T as p,L as g}from"./charts-7b23fd3b.js";import"./dexie-5294e5fd.js";const f=()=>{const{portfolioId:f}=a(),N=r(),[y,v]=l.useState(),[b,w]=l.useState(),[P,S]=l.useState(!0),[R,C]=l.useState([]);l.useEffect(()=>{I()},[f]);const I=async()=>{if(f)try{const[e,s]=await Promise.all([c.getById(Number(f)),c.getPortfolioSummary(Number(f))]);if(!e)throw new Error("포트폴리오를 찾을 수 없습니다.");if(v(e),w(s),s.positions.length>0){const e=s.positions.map(e=>{const t=e.quantity*e.currentPrice;return{name:e.name,symbol:e.symbol,value:t,percentage:s.totalValue>0?t/s.totalValue*100:0}}).sort((e,s)=>s.value-e.value);C(e)}}catch(e){}finally{S(!1)}};return P?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(s,{})}):y&&b?e.jsx("div",{className:"p-4 pb-20",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("button",{onClick:()=>N("/portfolios"),className:"text-sm text-gray-400 hover:text-white flex items-center",children:[e.jsx(d,{className:"h-4 w-4 mr-1"}),"뒤로"]})}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:y.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{to:`/portfolios/${y.id}/investment-rules`,className:"inline-flex items-center px-3 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:[e.jsx(m,{className:"h-4 w-4 mr-1"}),"투자 규칙"]}),e.jsxs(i,{to:`/portfolios/${y.id}/investment-plans`,className:"inline-flex items-center px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:[e.jsx(o,{className:"h-5 w-5 mr-1"}),"투자 계획"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"총자산"}),e.jsx("p",{className:"font-medium",children:n(b.totalValue,y?.currency||"KRW")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"수익률"}),e.jsxs("p",{className:"font-medium "+(b.returnRate>=0?"text-green-400":"text-red-400"),children:[b.returnRate.toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"투자 기간"}),e.jsx("p",{className:"font-medium",children:y.config?.period||"미설정"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"자산 구성"}),e.jsx("div",{className:"h-[400px]",children:R.length>0?e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(h,{children:[e.jsx(j,{data:R,dataKey:"value",nameKey:"symbol",cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:2,children:R.map((s,a)=>e.jsx(u,{fill:t[a%t.length]},`cell-${a}`))}),e.jsx(p,{formatter:e=>[n(e,y?.currency||"KRW"),"평가금액"]}),e.jsx(g,{})]})}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-gray-400",children:"보유 종목이 없습니다."})})})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"보유 종목"}),e.jsx("div",{className:"space-y-4",children:b.positions.map((s,a)=>{const r=s.quantity*s.currentPrice,l=b.totalValue>0?r/b.totalValue*100:0,i=(s.currentPrice-s.avgPrice)/s.avgPrice*100;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:t[a%t.length]}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-gray-400",children:s.symbol})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:n(r,y?.currency||"KRW")}),e.jsxs("p",{className:"text-sm text-gray-400",children:[l.toFixed(1),"%"]}),e.jsxs("p",{className:"text-sm "+(i>=0?"text-green-400":"text-red-400"),children:[i.toFixed(2),"%"]})]})]},s.id)})})]})]})]})}):e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-400",children:"포트폴리오를 찾을 수 없습니다."}),e.jsx(i,{to:"/portfolios",className:"inline-block mt-4 text-blue-500 hover:text-blue-400",children:"포트폴리오 목록으로 돌아가기"})]})})};export{f as PortfolioDetail};
//# sourceMappingURL=PortfolioDetail-f44b3c8e.js.map
