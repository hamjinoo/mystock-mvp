import{r as e,j as t}from"./react-265ec861.js";import{L as a}from"./index-65335e1b.js";import{P as s}from"./portfolioService-3819a654.js";import{j as c,b as n}from"./vendor-936e0d4d.js";import"./dexie-e331f4d1.js";import"./router-a48e489e.js";const r=()=>{const{id:r}=c(),o=n(),[l,i]=e.useState(null),[u,m]=e.useState(""),[d,x]=e.useState(""),[p,g]=e.useState(""),[f,b]=e.useState(0),[h,j]=e.useState(!0);e.useEffect((()=>{y()}),[r]);const y=async()=>{if(r)try{const e=await s.getById(Number(r));e&&(i(e),m(e.accountName||""),x(e.broker||""),g(e.accountNumber||""),b(e.config?.totalCapital||0))}catch(e){}finally{j(!1)}};return h?t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx(a,{})})}):l?t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsxs("div",{className:"max-w-2xl mx-auto",children:[t.jsx("h1",{className:"text-2xl font-bold mb-8",children:"포트폴리오 설정"}),t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),l)try{const e={totalCapital:f,categoryAllocations:l.config?.categoryAllocations||{LONG_TERM:{targetPercentage:50,maxStockPercentage:10,maxEntries:3},MID_TERM:{targetPercentage:30,maxStockPercentage:7.5,maxEntries:2},SHORT_TERM:{targetPercentage:5,maxStockPercentage:5,maxEntries:1},UNCATEGORIZED:{targetPercentage:15,maxStockPercentage:100,maxEntries:1}},period:l.config?.period,description:l.config?.description||"",targetAllocation:l.config?.targetAllocation||0};await s.update(l.id,{...l,accountName:u.trim(),broker:d.trim(),accountNumber:p.trim(),config:e}),o(`/accounts/${l.accountId}`)}catch(t){alert("포트폴리오 설정 저장에 실패했습니다.")}},className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"계좌 이름"}),t.jsx("input",{type:"text",value:u,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 bg-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"예: 장기투자 계좌, 미국주식 계좌"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"증권사"}),t.jsx("input",{type:"text",value:d,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 bg-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"예: 미래에셋, NH투자증권"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"계좌번호"}),t.jsx("input",{type:"text",value:p,onChange:e=>g(e.target.value),className:"w-full px-4 py-2 bg-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"계좌번호를 입력하세요"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"총 자산 규모"}),t.jsx("input",{type:"number",value:f,onChange:e=>b(Number(e.target.value)),className:"w-full px-4 py-2 bg-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"1000"})]}),t.jsxs("div",{className:"flex justify-between pt-6",children:[t.jsx("button",{type:"button",onClick:async()=>{if(l&&window.confirm("이 포트폴리오를 삭제하시겠습니까?"))try{await s.delete(l.id),o(`/accounts/${l.accountId}`)}catch(e){alert("포트폴리오 삭제에 실패했습니다.")}},className:"px-6 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"삭제"}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsx("button",{type:"button",onClick:()=>o(`/accounts/${l.accountId}`),className:"px-6 py-2 text-gray-400 hover:text-gray-300",children:"취소"}),t.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"저장"})]})]})]})]})}):t.jsx("div",{className:"p-4 text-center",children:t.jsx("p",{children:"포트폴리오를 찾을 수 없습니다."})})};export{r as PortfolioConfigPage};
//# sourceMappingURL=PortfolioConfigPage-1ab0a8dc.js.map
