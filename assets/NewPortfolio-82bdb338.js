import{j as e,L as s}from"./index-e48b942e.js";import{u as t,r as a}from"./react-2981e50d.js";import{A as r}from"./accountService-f5f42876.js";import{P as c}from"./portfolioService-309953aa.js";import"./dexie-5294e5fd.js";const n={LONG_TERM:{name:"장기 투자",description:"3년 이상의 장기 투자 포트폴리오"},MID_TERM:{name:"중기 투자",description:"1~3년의 중기 투자 포트폴리오"},SHORT_TERM:{name:"단기 투자",description:"1년 미만의 단기 투자 포트폴리오"},UNCATEGORIZED:{name:"미분류",description:"투자 기간이 정해지지 않은 포트폴리오"},CUSTOM:{name:"직접 입력",description:"투자 기간을 직접 설정"}},i=()=>{const i=t(),[l,o]=a.useState(""),[d,m]=a.useState("LONG_TERM"),[x,u]=a.useState(""),[p,h]=a.useState(!0),[b,j]=a.useState("");a.useEffect(()=>{y()},[]);const y=async()=>{try{0===(await r.getAll()).length&&j("계좌가 없습니다. 먼저 계좌를 생성해주세요.")}catch(e){j("계좌 정보를 불러올 수 없습니다.")}finally{h(!1)}};return p?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(s,{})})}):b?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"새 포트폴리오"}),e.jsx("p",{className:"text-red-400 mb-4",children:b}),e.jsx("button",{onClick:()=>i("/accounts/new"),className:"px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"새 계좌 등록하기"})]})}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold mb-8",children:"새 포트폴리오"}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const e=await r.getAll();if(0===e.length)return alert("계좌가 없습니다. 먼저 계좌를 생성해주세요."),void i("/accounts/new");const s=e[0],t={name:l.trim(),accountId:s.id,currency:s.currency,config:{targetAllocation:0,period:"CUSTOM"===d?"UNCATEGORIZED":d,description:"CUSTOM"===d?x:n[d].description,totalCapital:0}};await c.create(t),i("/portfolios")}catch(s){alert("포트폴리오 생성에 실패했습니다.")}},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"포트폴리오명"}),e.jsx("input",{type:"text",value:l,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 bg-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"예: 성장주 포트폴리오, 배당주 포트폴리오",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-4",children:"투자 기간"}),e.jsx("div",{className:"space-y-4",children:Object.keys(n).map(s=>{const t=n[s];return e.jsxs("div",{className:"p-4 rounded cursor-pointer border-2 "+(d===s?"border-blue-500 bg-gray-800":"border-gray-700 bg-gray-800 hover:border-gray-600"),onClick:()=>m(s),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"period",checked:d===s,onChange:()=>m(s),className:"mr-2"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:t.name}),e.jsx("p",{className:"text-sm text-gray-400",children:t.description})]})]}),"CUSTOM"===s&&"CUSTOM"===d&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"설명"}),e.jsx("input",{type:"text",value:x,onChange:e=>u(e.target.value),className:"w-full px-3 py-1 bg-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"투자 전략에 대한 설명을 입력하세요",required:"CUSTOM"===d})]})]},s)})})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>i("/portfolios"),className:"px-6 py-2 text-gray-400 hover:text-gray-300",children:"취소"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",disabled:!l.trim()||"CUSTOM"===d&&!x.trim(),children:"생성"})]})]})]})})};export{i as NewPortfolioPage,i as default};
//# sourceMappingURL=NewPortfolio-82bdb338.js.map
