import{r as e,j as t,f as s}from"./react-265ec861.js";import{L as a,d as l}from"./index-65335e1b.js";import{j as n,b as o,n as r}from"./vendor-936e0d4d.js";import"./dexie-e331f4d1.js";import"./router-a48e489e.js";const i=()=>{const{id:i}=n(),c=o(),[d,m]=e.useState(null),[x,u]=e.useState("new"===i),[h,p]=e.useState(""),[b,j]=e.useState(""),[f,N]=e.useState(!0);e.useEffect((()=>{if("new"===i)return void N(!1);(async()=>{try{l.isOpen()||await l.open();const e=await l.getMemoById(Number(i));e&&(m(e),p(e.title),j(e.content))}catch(e){}finally{N(!1)}})()}),[i]);return f?t.jsx("div",{className:"text-center py-8",children:t.jsx(a,{})}):t.jsxs("div",{className:"h-screen flex flex-col",children:[t.jsx("div",{className:"p-4 border-b border-gray-700 bg-gray-900",children:t.jsx("div",{className:"max-w-3xl mx-auto",children:t.jsxs("div",{className:"flex justify-between items-center",children:[x?t.jsx("input",{type:"text",value:h,onChange:e=>p(e.target.value),placeholder:"제목을 입력하세요",className:"text-2xl font-bold bg-transparent border-b border-gray-600 focus:border-blue-500 focus:outline-none w-full"}):t.jsx("h1",{className:"text-2xl font-bold",children:h}),!x&&"new"!==i&&t.jsxs("button",{onClick:()=>u(!0),className:"inline-flex items-center px-3 py-1 text-blue-400 hover:text-blue-300 transition-colors",children:[t.jsx(s,{className:"h-5 w-5 mr-1"}),"수정"]})]})})}),t.jsx("div",{className:"flex-1 overflow-hidden",children:t.jsx("div",{className:"h-full p-4 overflow-auto",children:t.jsx("div",{className:"max-w-3xl mx-auto",children:x?t.jsxs("div",{className:"space-y-4",children:[t.jsx("textarea",{value:b,onChange:e=>j(e.target.value),placeholder:"내용을 입력하세요 (마크다운 사용 가능)\n# 제목 1\n## 제목 2\n- 목록\n1. 번호 목록\n**굵게** _기울임_\n```코드 블록```",className:"w-full h-[calc(100vh-240px)] p-4 bg-gray-800 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono"}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>{"new"===i?c("/memos"):(u(!1),p(d?.title||""),j(d?.content||""))},className:"px-4 py-2 text-gray-400 hover:text-gray-300 transition-colors",children:"취소"}),t.jsx("button",{onClick:async()=>{try{if(!h.trim()||!b.trim())return void alert("제목과 내용을 모두 입력해주세요.");if(l.isOpen()||await l.open(),"new"===i){const e={title:h.trim(),content:b.trim(),createdAt:Date.now(),updatedAt:Date.now()};await l.addMemo(e)}else d&&await l.updateMemo({...d,title:h.trim(),content:b.trim()});c("/memos")}catch(e){alert("메모 저장 중 오류가 발생했습니다.")}},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"저장"})]})]}):t.jsx("div",{className:"prose prose-invert prose-lg max-w-none",children:t.jsx("div",{className:"markdown-content",children:t.jsx(r,{components:{h1:({node:e,...s})=>t.jsx("h1",{className:"text-3xl font-bold mt-8 mb-4",...s}),h2:({node:e,...s})=>t.jsx("h2",{className:"text-2xl font-bold mt-6 mb-3",...s}),h3:({node:e,...s})=>t.jsx("h3",{className:"text-xl font-bold mt-4 mb-2",...s}),p:({node:e,...s})=>t.jsx("p",{className:"my-4 leading-relaxed",...s}),ul:({node:e,...s})=>t.jsx("ul",{className:"list-disc list-inside my-4 space-y-2",...s}),ol:({node:e,...s})=>t.jsx("ol",{className:"list-decimal list-inside my-4 space-y-2",...s}),li:({node:e,...s})=>t.jsx("li",{className:"ml-4",...s}),code:({node:e,children:s,className:a,...l})=>!a?t.jsx("code",{className:"bg-gray-700 rounded px-1 py-0.5 font-mono text-sm",...l,children:s}):t.jsx("code",{className:"block bg-gray-700 rounded p-4 font-mono text-sm my-4 overflow-x-auto",...l,children:s}),blockquote:({node:e,...s})=>t.jsx("blockquote",{className:"border-l-4 border-gray-500 pl-4 my-4 italic",...s}),a:({node:e,...s})=>t.jsx("a",{className:"text-blue-400 hover:text-blue-300 underline",...s})},children:b})})})})})}),!x&&"new"!==i&&t.jsx("div",{className:"mt-10 p-4 bg-gray-900",children:t.jsx("div",{className:"max-w-3xl mx-auto text-center",children:t.jsx("button",{onClick:async()=>{if(window.confirm("정말로 이 메모를 삭제하시겠습니까?"))try{l.isOpen()||await l.open(),await l.deleteMemo(Number(i)),c("/memos")}catch(e){alert("메모 삭제 중 오류가 발생했습니다.")}},className:"text-red-500 hover:text-red-400 underline",children:"삭제하기"})})})]})};export{i as MemoDetailPage};
//# sourceMappingURL=MemoDetailPage-fb23f0f7.js.map
