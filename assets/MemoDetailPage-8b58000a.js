import{j as e,L as s,d as t}from"./index-e48b942e.js";import{e as a,u as l,r as n}from"./react-2981e50d.js";import{P as o}from"./PencilIcon-855fc7f7.js";import{R as r}from"./markdown-a18e8fd3.js";import"./dexie-5294e5fd.js";import"./charts-7b23fd3b.js";const c=()=>{const{id:c}=a(),i=l(),[d,m]=n.useState(null),[x,u]=n.useState("new"===c),[h,p]=n.useState(""),[j,b]=n.useState(""),[f,N]=n.useState(!0);n.useEffect(()=>{if("new"===c)return void N(!1);(async()=>{try{t.isOpen()||await t.open();const e=await t.getMemoById(Number(c));e&&(m(e),p(e.title),b(e.content))}catch(e){}finally{N(!1)}})()},[c]);return f?e.jsx("div",{className:"text-center py-8",children:e.jsx(s,{})}):e.jsxs("div",{className:"h-screen flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-700 bg-gray-900",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"flex justify-between items-center",children:[x?e.jsx("input",{type:"text",value:h,onChange:e=>p(e.target.value),placeholder:"제목을 입력하세요",className:"text-2xl font-bold bg-transparent border-b border-gray-600 focus:border-blue-500 focus:outline-none w-full"}):e.jsx("h1",{className:"text-2xl font-bold",children:h}),!x&&"new"!==c&&e.jsxs("button",{onClick:()=>u(!0),className:"inline-flex items-center px-3 py-1 text-blue-400 hover:text-blue-300 transition-colors",children:[e.jsx(o,{className:"h-5 w-5 mr-1"}),"수정"]})]})})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx("div",{className:"h-full p-4 overflow-auto",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:x?e.jsxs("div",{className:"space-y-4",children:[e.jsx("textarea",{value:j,onChange:e=>b(e.target.value),placeholder:"내용을 입력하세요 (마크다운 사용 가능)\n# 제목 1\n## 제목 2\n- 목록\n1. 번호 목록\n**굵게** _기울임_\n```코드 블록```",className:"w-full h-[calc(100vh-240px)] p-4 bg-gray-800 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{"new"===c?i("/memos"):(u(!1),p(d?.title||""),b(d?.content||""))},className:"px-4 py-2 text-gray-400 hover:text-gray-300 transition-colors",children:"취소"}),e.jsx("button",{onClick:async()=>{try{if(!h.trim()||!j.trim())return void alert("제목과 내용을 모두 입력해주세요.");if(t.isOpen()||await t.open(),"new"===c){const e={title:h.trim(),content:j.trim(),createdAt:Date.now(),updatedAt:Date.now()};await t.addMemo(e)}else d&&await t.updateMemo({...d,title:h.trim(),content:j.trim()});i("/memos")}catch(e){alert("메모 저장 중 오류가 발생했습니다.")}},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"저장"})]})]}):e.jsx("div",{className:"prose prose-invert prose-lg max-w-none",children:e.jsx("div",{className:"markdown-content",children:e.jsx(r,{components:{h1:({node:s,...t})=>e.jsx("h1",{className:"text-3xl font-bold mt-8 mb-4",...t}),h2:({node:s,...t})=>e.jsx("h2",{className:"text-2xl font-bold mt-6 mb-3",...t}),h3:({node:s,...t})=>e.jsx("h3",{className:"text-xl font-bold mt-4 mb-2",...t}),p:({node:s,...t})=>e.jsx("p",{className:"my-4 leading-relaxed",...t}),ul:({node:s,...t})=>e.jsx("ul",{className:"list-disc list-inside my-4 space-y-2",...t}),ol:({node:s,...t})=>e.jsx("ol",{className:"list-decimal list-inside my-4 space-y-2",...t}),li:({node:s,...t})=>e.jsx("li",{className:"ml-4",...t}),code:({node:s,children:t,className:a,...l})=>!a?e.jsx("code",{className:"bg-gray-700 rounded px-1 py-0.5 font-mono text-sm",...l,children:t}):e.jsx("code",{className:"block bg-gray-700 rounded p-4 font-mono text-sm my-4 overflow-x-auto",...l,children:t}),blockquote:({node:s,...t})=>e.jsx("blockquote",{className:"border-l-4 border-gray-500 pl-4 my-4 italic",...t}),a:({node:s,...t})=>e.jsx("a",{className:"text-blue-400 hover:text-blue-300 underline",...t})},children:j})})})})})}),!x&&"new"!==c&&e.jsx("div",{className:"mt-10 p-4 bg-gray-900",children:e.jsx("div",{className:"max-w-3xl mx-auto text-center",children:e.jsx("button",{onClick:async()=>{if(window.confirm("정말로 이 메모를 삭제하시겠습니까?"))try{t.isOpen()||await t.open(),await t.deleteMemo(Number(c)),i("/memos")}catch(e){alert("메모 삭제 중 오류가 발생했습니다.")}},className:"text-red-500 hover:text-red-400 underline",children:"삭제하기"})})})]})};export{c as MemoDetailPage};
//# sourceMappingURL=MemoDetailPage-8b58000a.js.map
