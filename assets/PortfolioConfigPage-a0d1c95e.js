import{j as e,L as t}from"./index-e48b942e.js";import{e as a,u as s,r as c}from"./react-2981e50d.js";import{P as n}from"./portfolioService-309953aa.js";import"./dexie-5294e5fd.js";const o=()=>{const{id:o}=a(),r=s(),[l,i]=c.useState(null),[u,m]=c.useState(""),[d,x]=c.useState(""),[g,p]=c.useState(""),[f,b]=c.useState(0),[h,y]=c.useState(!0);c.useEffect(()=>{j()},[o]);const j=async()=>{if(o)try{const e=await n.getById(Number(o));e&&(i(e),m(e.accountName||""),x(e.broker||""),p(e.accountNumber||""),b(e.config?.totalCapital||0))}catch(e){}finally{y(!1)}};return h?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(t,{})})}):l?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold mb-8",children:"포트폴리오 설정"}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),l)try{const e={totalCapital:f,categoryAllocations:l.config?.categoryAllocations||{LONG_TERM:{targetPercentage:50,maxStockPercentage:10,maxEntries:3},MID_TERM:{targetPercentage:30,maxStockPercentage:7.5,maxEntries:2},SHORT_TERM:{targetPercentage:5,maxStockPercentage:5,maxEntries:1},UNCATEGORIZED:{targetPercentage:15,maxStockPercentage:100,maxEntries:1}},period:l.config?.period,description:l.config?.description||"",targetAllocation:l.config?.targetAllocation||0};await n.update(l.id,{...l,accountName:u.trim(),broker:d.trim(),accountNumber:g.trim(),config:e}),r(`/accounts/${l.accountId}`)}catch(t){alert("포트폴리오 설정 저장에 실패했습니다.")}},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"계좌 이름"}),e.jsx("input",{type:"text",value:u,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 bg-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"예: 장기투자 계좌, 미국주식 계좌"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"증권사"}),e.jsx("input",{type:"text",value:d,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 bg-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"예: 미래에셋, NH투자증권"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"계좌번호"}),e.jsx("input",{type:"text",value:g,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 bg-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"계좌번호를 입력하세요"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"총 자산 규모"}),e.jsx("input",{type:"number",value:f,onChange:e=>b(Number(e.target.value)),className:"w-full px-4 py-2 bg-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"1000"})]}),e.jsxs("div",{className:"flex justify-between pt-6",children:[e.jsx("button",{type:"button",onClick:async()=>{if(l&&window.confirm("이 포트폴리오를 삭제하시겠습니까?"))try{await n.delete(l.id),r(`/accounts/${l.accountId}`)}catch(e){alert("포트폴리오 삭제에 실패했습니다.")}},className:"px-6 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"삭제"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>r(`/accounts/${l.accountId}`),className:"px-6 py-2 text-gray-400 hover:text-gray-300",children:"취소"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"저장"})]})]})]})]})}):e.jsx("div",{className:"p-4 text-center",children:e.jsx("p",{children:"포트폴리오를 찾을 수 없습니다."})})};export{o as PortfolioConfigPage};
//# sourceMappingURL=PortfolioConfigPage-a0d1c95e.js.map
