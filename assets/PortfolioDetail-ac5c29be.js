import{r as e,j as s,A as t}from"./react-265ec861.js";import{L as a}from"./router-a48e489e.js";import{L as r,C as l}from"./index-65335e1b.js";import{P as i}from"./portfolioService-3819a654.js";import{f as c}from"./currencyUtils-b432909e.js";import{j as n,b as d,k as m,P as x,m as o,C as h,T as j,L as u}from"./vendor-936e0d4d.js";import"./dexie-e331f4d1.js";const g=()=>{const{portfolioId:g}=n(),p=d(),[f,N]=e.useState(),[y,v]=e.useState(),[b,w]=e.useState(!0),[P,R]=e.useState([]);e.useEffect((()=>{S()}),[g]);const S=async()=>{if(g)try{const[e,s]=await Promise.all([i.getById(Number(g)),i.getPortfolioSummary(Number(g))]);if(!e)throw new Error("포트폴리오를 찾을 수 없습니다.");if(N(e),v(s),s.positions.length>0){const e=s.positions.map((e=>{const t=e.quantity*e.currentPrice;return{name:e.name,symbol:e.symbol,value:t,percentage:s.totalValue>0?t/s.totalValue*100:0}})).sort(((e,s)=>s.value-e.value));R(e)}}catch(e){}finally{w(!1)}};return b?s.jsx("div",{className:"flex justify-center items-center h-screen",children:s.jsx(r,{})}):f&&y?s.jsx("div",{className:"p-4 pb-20",children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("button",{onClick:()=>p("/portfolios"),className:"text-sm text-gray-400 hover:text-white flex items-center",children:[s.jsx(t,{className:"h-4 w-4 mr-1"}),"뒤로"]})}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:f.name}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"총자산"}),s.jsx("p",{className:"font-medium",children:c(y.totalValue,f?.currency||"KRW")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"수익률"}),s.jsxs("p",{className:"font-medium "+(y.returnRate>=0?"text-green-400":"text-red-400"),children:[y.returnRate.toFixed(2),"%"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"투자 기간"}),s.jsx("p",{className:"font-medium",children:f.config?.period||"미설정"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"자산 구성"}),s.jsx("div",{className:"h-[400px]",children:P.length>0?s.jsx(m,{width:"100%",height:"100%",children:s.jsxs(x,{children:[s.jsx(o,{data:P,dataKey:"value",nameKey:"symbol",cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:2,children:P.map(((e,t)=>s.jsx(h,{fill:l[t%l.length]},`cell-${t}`)))}),s.jsx(j,{formatter:e=>[c(e,f?.currency||"KRW"),"평가금액"]}),s.jsx(u,{})]})}):s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("p",{className:"text-gray-400",children:"보유 종목이 없습니다."})})})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"보유 종목"}),s.jsx("div",{className:"space-y-4",children:y.positions.map(((e,t)=>{const a=e.quantity*e.currentPrice,r=y.totalValue>0?a/y.totalValue*100:0,i=(e.currentPrice-e.avgPrice)/e.avgPrice*100;return s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:l[t%l.length]}}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:e.name}),s.jsx("p",{className:"text-sm text-gray-400",children:e.symbol})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-medium",children:c(a,f?.currency||"KRW")}),s.jsxs("p",{className:"text-sm text-gray-400",children:[r.toFixed(1),"%"]}),s.jsxs("p",{className:"text-sm "+(i>=0?"text-green-400":"text-red-400"),children:[i.toFixed(2),"%"]})]})]},e.id)}))})]})]})]})}):s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-400",children:"포트폴리오를 찾을 수 없습니다."}),s.jsx(a,{to:"/portfolios",className:"inline-block mt-4 text-blue-500 hover:text-blue-400",children:"포트폴리오 목록으로 돌아가기"})]})})};export{g as PortfolioDetail};
//# sourceMappingURL=PortfolioDetail-ac5c29be.js.map
