import{j as e,L as s,C as t}from"./index-e48b942e.js";import{e as a,u as n,r as l}from"./react-2981e50d.js";import{P as r}from"./portfolioService-309953aa.js";import{R as i,a as o,C as c,E as m}from"./riskManagementService-c38bc133.js";import{f as x}from"./currencyUtils-b432909e.js";import{A as d}from"./ArrowLeftIcon-57afa31b.js";import{S as u}from"./ShieldCheckIcon-3f143148.js";import{C as g}from"./CurrencyDollarIcon-1e6343ac.js";import"./dexie-5294e5fd.js";import"./accountService-f5f42876.js";const h=()=>{const{portfolioId:h}=a(),b=n(),[j,p]=l.useState(null),[f,y]=l.useState(null),[N,v]=l.useState(!0),[w,C]=l.useState(!1),[k,P]=l.useState(""),[S,L]=l.useState({});l.useEffect(()=>{h&&I()},[h]);const I=async()=>{if(h)try{const[e,s]=await Promise.all([r.getById(Number(h)),i.getOrCreateRules(Number(h))]);p(e||null),y(s),s&&L({maxPositionSize:s.maxPositionSize,maxPositionAmount:s.maxPositionAmount,maxDailyInvestment:s.maxDailyInvestment,maxMonthlyInvestment:s.maxMonthlyInvestment,minCashReserve:s.minCashReserve,maxPortfolioRisk:s.maxPortfolioRisk,maxSectorConcentration:s.maxSectorConcentration,requireConfirmationAbove:s.requireConfirmationAbove,cooldownPeriod:s.cooldownPeriod,maxConsecutiveLosses:s.maxConsecutiveLosses,autoStopLoss:s.autoStopLoss,stopLossPercentage:s.stopLossPercentage,autoTakeProfit:s.autoTakeProfit,takeProfitPercentage:s.takeProfitPercentage,enableWarnings:s.enableWarnings,warningThreshold:s.warningThreshold})}catch(e){}finally{v(!1)}},R=(e,s)=>{L(t=>({...t,[e]:s,portfolioId:Number(h)}))};return N?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(s,{})})}):j?e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("button",{onClick:()=>b(`/portfolios/${j.id}`),className:"text-sm text-gray-400 hover:text-white flex items-center mr-4",children:[e.jsx(d,{className:"h-4 w-4 mr-1"}),"ë’¤ë¡œ"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center",children:[e.jsx(u,{className:"h-6 w-6 mr-2 text-blue-400"}),"íˆ¬ì ê·œì¹™ ì„¤ì •"]}),e.jsx("p",{className:"text-gray-400",children:j.name})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{L({maxPositionSize:20,maxPositionAmount:1e6,maxDailyInvestment:5e5,maxMonthlyInvestment:2e6,minCashReserve:10,maxPortfolioRisk:6,maxSectorConcentration:40,requireConfirmationAbove:3e5,cooldownPeriod:24,maxConsecutiveLosses:3,autoStopLoss:!1,stopLossPercentage:10,autoTakeProfit:!1,takeProfitPercentage:20,enableWarnings:!0,warningThreshold:15})},className:"px-4 py-2 text-gray-400 hover:text-white border border-gray-600 rounded",children:"ê¸°ë³¸ê°’ìœ¼ë¡œ ì¬ì„¤ì •"}),e.jsx("button",{onClick:async()=>{if(h&&S.portfolioId){C(!0);try{await i.updateRules(Number(h),S),P("íˆ¬ì ê·œì¹™ì´ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤."),setTimeout(()=>P(""),3e3),I()}catch(e){alert("ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{C(!1)}}},disabled:w,className:"px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:w?"ì €ì¥ ì¤‘...":"ì €ì¥"})]})]}),k&&e.jsxs("div",{className:"mb-6 p-4 bg-green-900/20 border border-green-500/30 rounded-lg flex items-center",children:[e.jsx(o,{className:"h-5 w-5 text-green-400 mr-2"}),e.jsx("span",{className:"text-green-400",children:k})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center",children:[e.jsx(t,{className:"h-5 w-5 mr-2 text-blue-400"}),"í¬ì§€ì…˜ ê´€ë¦¬ ê·œì¹™"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"ë‹¨ì¼ ì¢…ëª© ìµœëŒ€ ë¹„ì¤‘ (%)"}),e.jsx("input",{type:"number",value:S.maxPositionSize||"",onChange:e=>R("maxPositionSize",Number(e.target.value)),className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"100"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"ê¶Œì¥: 10-20% (ë¶„ì‚° íˆ¬ìë¥¼ ìœ„í•´)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:["ë‹¨ì¼ ì¢…ëª© ìµœëŒ€ ê¸ˆì•¡ (",j.currency,")"]}),e.jsx("input",{type:"number",value:S.maxPositionAmount||"",onChange:e=>R("maxPositionAmount",Number(e.target.value)),className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:outline-none focus:ring-2 focus:ring-blue-500",min:"10000",step:"10000"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["í˜„ì¬ ì„¤ì •: ",x(S.maxPositionAmount||0,j.currency)]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:["ì¼ì¼ ìµœëŒ€ íˆ¬ì ê¸ˆì•¡ (",j.currency,")"]}),e.jsx("input",{type:"number",value:S.maxDailyInvestment||"",onChange:e=>R("maxDailyInvestment",Number(e.target.value)),className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:outline-none focus:ring-2 focus:ring-blue-500",min:"10000",step:"10000"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"ì¶©ë™ì ì¸ ëŒ€ëŸ‰ ë§¤ìˆ˜ë¥¼ ë°©ì§€í•©ë‹ˆë‹¤"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:["ì›”ê°„ ìµœëŒ€ íˆ¬ì ê¸ˆì•¡ (",j.currency,")"]}),e.jsx("input",{type:"number",value:S.maxMonthlyInvestment||"",onChange:e=>R("maxMonthlyInvestment",Number(e.target.value)),className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:outline-none focus:ring-2 focus:ring-blue-500",min:"50000",step:"50000"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"ì›”ê°„ íˆ¬ì ì˜ˆì‚°ì„ ê´€ë¦¬í•©ë‹ˆë‹¤"})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center",children:[e.jsx(g,{className:"h-5 w-5 mr-2 text-green-400"}),"í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬ ê·œì¹™"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"ìµœì†Œ í˜„ê¸ˆ ë³´ìœ ìœ¨ (%)"}),e.jsx("input",{type:"number",value:S.minCashReserve||"",onChange:e=>R("minCashReserve",Number(e.target.value)),className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",max:"50"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"ë¹„ìƒ ìê¸ˆ í™•ë³´ë¥¼ ìœ„í•´"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"ìµœëŒ€ í¬íŠ¸í´ë¦¬ì˜¤ ìœ„í—˜ë„ (1-10)"}),e.jsx("input",{type:"range",value:S.maxPortfolioRisk||5,onChange:e=>R("maxPortfolioRisk",Number(e.target.value)),className:"w-full",min:"1",max:"10"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[e.jsx("span",{children:"ì•ˆì „ (1)"}),e.jsx("span",{className:"font-medium text-white",children:S.maxPortfolioRisk}),e.jsx("span",{children:"ìœ„í—˜ (10)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"ì„¹í„°ë³„ ìµœëŒ€ ì§‘ì¤‘ë„ (%)"}),e.jsx("input",{type:"number",value:S.maxSectorConcentration||"",onChange:e=>R("maxSectorConcentration",Number(e.target.value)),className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:outline-none focus:ring-2 focus:ring-blue-500",min:"10",max:"100"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"ì„¹í„° ë¶„ì‚°ì„ ìœ„í•œ ì œí•œ"})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center",children:[e.jsx(c,{className:"h-5 w-5 mr-2 text-yellow-400"}),"ë§¤ìˆ˜ ì‹¤í–‰ ê·œì¹™"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:["í™•ì¸ í•„ìš” ê¸ˆì•¡ (",j.currency,")"]}),e.jsx("input",{type:"number",value:S.requireConfirmationAbove||"",onChange:e=>R("requireConfirmationAbove",Number(e.target.value)),className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:outline-none focus:ring-2 focus:ring-blue-500",min:"10000",step:"10000"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"ì´ ê¸ˆì•¡ ì´ìƒ ë§¤ìˆ˜ ì‹œ ì¶”ê°€ í™•ì¸"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"ì¬ë§¤ìˆ˜ ëŒ€ê¸° ì‹œê°„ (ì‹œê°„)"}),e.jsx("input",{type:"number",value:S.cooldownPeriod||"",onChange:e=>R("cooldownPeriod",Number(e.target.value)),className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"168"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"ë™ì¼ ì¢…ëª© ì¬ë§¤ìˆ˜ ëŒ€ê¸° ì‹œê°„"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"ì—°ì† ì†ì‹¤ í—ˆìš© íšŸìˆ˜"}),e.jsx("input",{type:"number",value:S.maxConsecutiveLosses||"",onChange:e=>R("maxConsecutiveLosses",Number(e.target.value)),className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"10"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"ì´ íšŸìˆ˜ ì´ˆê³¼ ì‹œ ë§¤ìˆ˜ ì¤‘ë‹¨ ê²½ê³ "})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center",children:[e.jsx(m,{className:"h-5 w-5 mr-2 text-red-400"}),"ì†ì ˆ/ìµì ˆ ê·œì¹™"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:S.autoStopLoss||!1,onChange:e=>R("autoStopLoss",e.target.checked),className:"mr-2"}),e.jsx("span",{className:"text-gray-300",children:"ìë™ ì†ì ˆ í™œì„±í™”"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"ì†ì ˆ ê¸°ì¤€ (%)"}),e.jsx("input",{type:"number",value:S.stopLossPercentage||"",onChange:e=>R("stopLossPercentage",Number(e.target.value)),className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"50",disabled:!S.autoStopLoss}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"ì´ ë¹„ìœ¨ ì´ìƒ ì†ì‹¤ ì‹œ ìë™ ë§¤ë„"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:S.autoTakeProfit||!1,onChange:e=>R("autoTakeProfit",e.target.checked),className:"mr-2"}),e.jsx("span",{className:"text-gray-300",children:"ìë™ ìµì ˆ í™œì„±í™”"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"ìµì ˆ ê¸°ì¤€ (%)"}),e.jsx("input",{type:"number",value:S.takeProfitPercentage||"",onChange:e=>R("takeProfitPercentage",Number(e.target.value)),className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"200",disabled:!S.autoTakeProfit}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"ì´ ë¹„ìœ¨ ì´ìƒ ìˆ˜ìµ ì‹œ ìë™ ë§¤ë„"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center",children:[e.jsx(m,{className:"h-5 w-5 mr-2 text-yellow-400"}),"ê²½ê³  ì‹œìŠ¤í…œ ì„¤ì •"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",checked:S.enableWarnings||!1,onChange:e=>R("enableWarnings",e.target.checked),className:"mr-2"}),e.jsx("span",{className:"text-gray-300",children:"ìœ„í—˜ ê²½ê³  ì‹œìŠ¤í…œ í™œì„±í™”"})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"íˆ¬ì ì „ ìœ„í—˜ ë¶„ì„ ë° ê²½ê³  ë©”ì‹œì§€ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"ê²½ê³  ì„ê³„ê°’ (%)"}),e.jsx("input",{type:"number",value:S.warningThreshold||"",onChange:e=>R("warningThreshold",Number(e.target.value)),className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:outline-none focus:ring-2 focus:ring-blue-500",min:"5",max:"50",disabled:!S.enableWarnings}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"ì´ ë¹„ìœ¨ ì´ìƒ ìœ„í—˜ ì‹œ ê²½ê³  í‘œì‹œ"})]})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-900/20 border border-blue-500/30 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-400 mb-2",children:"ğŸ’¡ ì•ˆì „ íˆ¬ì ê°€ì´ë“œ"}),e.jsxs("ul",{className:"text-sm text-blue-300 space-y-1",children:[e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"ë¶„ì‚° íˆ¬ì:"})," ë‹¨ì¼ ì¢…ëª© ë¹„ì¤‘ì„ 20% ì´í•˜ë¡œ ìœ ì§€í•˜ì„¸ìš”"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"í˜„ê¸ˆ ê´€ë¦¬:"})," ìµœì†Œ 10-20%ì˜ í˜„ê¸ˆì„ ë³´ìœ í•˜ì„¸ìš”"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"ê°ì • ì œì–´:"})," ì¼ì¼ íˆ¬ì í•œë„ë¡œ ì¶©ë™ì  ë§¤ìˆ˜ë¥¼ ë°©ì§€í•˜ì„¸ìš”"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"ì†ì ˆ ì›ì¹™:"})," ë¯¸ë¦¬ ì •í•œ ì†ì ˆ ê¸°ì¤€ì„ ì§€í‚¤ì„¸ìš”"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"ì¬ë§¤ìˆ˜ ëŒ€ê¸°:"})," ë™ì¼ ì¢…ëª© ì¬ë§¤ìˆ˜ ì‹œ ì¶©ë¶„í•œ ì‹œê°„ì„ ë‘ì„¸ìš”"]})]})]})]})}):e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-400",children:"í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."}),e.jsx("button",{onClick:()=>b("/portfolios"),className:"mt-4 text-blue-500 hover:text-blue-400",children:"í¬íŠ¸í´ë¦¬ì˜¤ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°"})]})})};export{h as InvestmentRulesPage};
//# sourceMappingURL=InvestmentRulesPage-454b1435.js.map
