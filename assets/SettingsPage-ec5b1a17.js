import{g as e,j as s,d as t,c as a,r as i,b as n}from"./index-e48b942e.js";import{r as l}from"./react-2981e50d.js";import"./dexie-5294e5fd.js";const d=()=>{const[d,c]=l.useState(""),[r,o]=l.useState([]),[m,x]=l.useState(!1),[u,p]=l.useState(null),[h,b]=l.useState(null);l.useEffect(()=>{g()},[]);const g=()=>{const s=e();o(s)};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-8",children:"설정"}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"데이터베이스 백업"}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex gap-4 mb-4",children:[s.jsx("input",{type:"text",value:d,onChange:e=>c(e.target.value),placeholder:"백업 이름 입력",className:"flex-1 px-4 py-2 bg-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("button",{onClick:async()=>{if(d.trim())try{x(!0),p(null),b(null),t.isOpen()||await t.open(),await a(d.trim()),c(""),g(),b("백업이 생성되었습니다.")}catch(e){p("백업 생성 중 오류가 발생했습니다.")}finally{x(!1)}else p("백업 이름을 입력해주세요.")},disabled:m,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:m?"처리 중...":"백업 생성"})]}),u&&s.jsx("div",{className:"text-red-500 mb-4",children:u}),h&&s.jsx("div",{className:"text-green-500 mb-4",children:h}),s.jsxs("div",{className:"space-y-4",children:[r.map(e=>{return s.jsxs("div",{className:"flex items-center justify-between bg-gray-700 p-4 rounded",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:e.name}),s.jsx("div",{className:"text-sm text-gray-400",children:(a=e.timestamp,new Date(a).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}))})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>(async e=>{if(window.confirm("정말로 이 백업을 복원하시겠습니까? 현재 데이터는 모두 삭제됩니다."))try{x(!0),p(null),b(null),t.isOpen()||await t.open(),await i(e),b("백업이 복원되었습니다. 페이지를 새로고침합니다."),setTimeout(()=>{window.location.reload()},1500)}catch(s){p("백업 복원 중 오류가 발생했습니다.")}finally{x(!1)}})(e.timestamp),disabled:m,className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:"복원"}),s.jsx("button",{onClick:()=>(async e=>{if(window.confirm("이 백업을 삭제하시겠습니까?"))try{n(e),g(),b("백업이 삭제되었습니다.")}catch(s){p("백업 삭제 중 오류가 발생했습니다.")}})(e.timestamp),disabled:m,className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50",children:"삭제"})]})]},e.timestamp);var a}),0===r.length&&s.jsx("div",{className:"text-center text-gray-400 py-8",children:"저장된 백업이 없습니다."})]})]})]})]})};export{d as SettingsPage};
//# sourceMappingURL=SettingsPage-ec5b1a17.js.map
