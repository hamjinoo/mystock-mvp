import{j as e,r as t}from"./react-265ec861.js";import{L as s}from"./router-a48e489e.js";import{L as a}from"./index-65335e1b.js";import{A as r}from"./accountService-26154c96.js";import{P as i}from"./portfolioService-3819a654.js";import{f as l}from"./currencyUtils-b432909e.js";import"./vendor-936e0d4d.js";import"./dexie-e331f4d1.js";const n=({message:t,onRetry:s,className:a=""})=>e.jsxs("div",{className:`bg-red-900/50 text-red-400 p-4 rounded ${a}`,children:[e.jsx("p",{className:"mb-2",children:t}),s&&e.jsx("button",{onClick:s,className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700 transition-colors",children:"다시 시도"})]}),c=()=>{const[c,o]=t.useState([]),[d,x]=t.useState(!0),[m,u]=t.useState(null);t.useEffect((()=>{h()}),[]);const h=async()=>{try{const[e,t]=await Promise.all([i.getAll(),r.getAll()]),s=await Promise.all(e.map((async e=>{const s=t.find((t=>t.id===e.accountId)),a=await i.getPortfolioSummary(e.id);return{...e,account:s,positionCount:a.positions.length,totalValue:a.totalValue,totalCost:a.totalCost,returnRate:a.returnRate}})));o(s)}catch(e){u(e)}finally{x(!1)}};return d?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(a,{})})}):m?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(n,{message:m.message,onRetry:h})}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"포트폴리오"}),e.jsx(s,{to:"/portfolios/new",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"새 포트폴리오"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:c.map((t=>e.jsxs(s,{to:`/portfolios/${t.id}`,className:"block bg-gray-800 p-6 rounded-lg hover:bg-gray-700 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg font-medium mb-2",children:t.name||"이름 없음"}),e.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full mr-2"}),"LONG_TERM"===t.config?.period&&"장기 투자","MID_TERM"===t.config?.period&&"중기 투자","SHORT_TERM"===t.config?.period&&"단기 투자","UNCATEGORIZED"===t.config?.period&&"미분류"]}),e.jsx("p",{children:t.account?.accountName||"계좌 정보 없음"}),e.jsxs("p",{className:"text-xs",children:[t.account?.broker," •"," ","KRW"===t.currency?"원화":"달러"," 계좌"]})]})]}),e.jsx("div",{className:"text-right",children:t.totalValue>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-lg font-bold text-blue-400",children:["₩",l(t.totalValue,"KRW")]}),e.jsxs("div",{className:"text-sm font-medium "+(t.returnRate>=0?"text-green-400":"text-red-400"),children:[t.returnRate>=0?"+":"",t.returnRate.toFixed(2),"%"]}),e.jsxs("div",{className:"text-xs text-gray-400",children:[t.positionCount,"개 종목"]})]}):e.jsx("div",{className:"text-sm text-gray-400",children:"포지션 없음"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t border-gray-700",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:t.positionCount}),e.jsx("div",{className:"text-xs text-gray-400",children:"종목 수"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-medium text-white",children:["₩",l(t.totalCost,"KRW")]}),e.jsx("div",{className:"text-xs text-gray-400",children:"투자금액"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium "+(t.returnRate>=0?"text-green-400":"text-red-400"),children:t.totalValue>0?e.jsxs(e.Fragment,{children:[t.returnRate>=0?"+":"","₩",l(Math.abs(t.totalValue-t.totalCost),"KRW")]}):"-"}),e.jsx("div",{className:"text-xs text-gray-400",children:"평가손익"})]})]})]},t.id)))}),0===c.length&&e.jsxs("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[e.jsx("p",{className:"text-gray-400 mb-4",children:"등록된 포트폴리오가 없습니다."}),e.jsx(s,{to:"/portfolios/new",className:"inline-block px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"첫 포트폴리오 만들기"})]})]})})};export{c as PortfolioList};
//# sourceMappingURL=PortfolioList-2772b6a7.js.map
