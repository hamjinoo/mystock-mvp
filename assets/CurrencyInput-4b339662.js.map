{"version":3,"file":"CurrencyInput-4b339662.js","sources":["../../src/components/CurrencyInput.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Currency,\r\n  formatCurrency,\r\n  getCurrencyPlaceholder,\r\n  getCurrencyStep,\r\n  getCurrencySymbol,\r\n  parseNumberFromInput,\r\n} from \"../utils/currencyUtils\";\r\n\r\ninterface CurrencyInputProps {\r\n  value: number;\r\n  onChange: (value: number) => void;\r\n  currency: Currency;\r\n  placeholder?: string;\r\n  label?: string;\r\n  required?: boolean;\r\n  className?: string;\r\n  type?: \"price\" | \"amount\";\r\n}\r\n\r\nexport const CurrencyInput: React.FC<CurrencyInputProps> = ({\r\n  value,\r\n  onChange,\r\n  currency,\r\n  placeholder,\r\n  label,\r\n  required = false,\r\n  className = \"\",\r\n  type = \"price\",\r\n}) => {\r\n  const [displayValue, setDisplayValue] = useState(\"\");\r\n  const [isFocused, setIsFocused] = useState(false);\r\n\r\n  // value가 변경될 때 displayValue 업데이트\r\n  useEffect(() => {\r\n    setDisplayValue(value > 0 ? formatCurrency(value, currency) : \"\");\r\n  }, [value, currency]);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const inputValue = e.target.value;\r\n\r\n    // 숫자와 콤마, 소수점만 허용\r\n    const cleanedValue = inputValue.replace(/[^\\d,.]/g, \"\");\r\n    const numericValue = parseNumberFromInput(cleanedValue);\r\n\r\n    // 실시간 포맷팅 적용\r\n    if (cleanedValue === \"\" || numericValue === 0) {\r\n      setDisplayValue(\"\");\r\n      onChange(0);\r\n    } else {\r\n      const formatted = formatCurrency(numericValue, currency);\r\n      setDisplayValue(formatted);\r\n      onChange(numericValue);\r\n    }\r\n  };\r\n\r\n  const handleFocus = () => {\r\n    setIsFocused(true);\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    setIsFocused(false);\r\n    // 포커스 해제 시에도 포맷팅 유지\r\n    if (value > 0) {\r\n      setDisplayValue(formatCurrency(value, currency));\r\n    }\r\n  };\r\n\r\n  const currencySymbol = getCurrencySymbol(currency);\r\n  const step = getCurrencyStep(currency);\r\n  const defaultPlaceholder =\r\n    placeholder || getCurrencyPlaceholder(currency, type);\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      {label && (\r\n        <label className=\"block text-sm font-medium mb-2\">{label}</label>\r\n      )}\r\n      <div className=\"relative\">\r\n        <div className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none\">\r\n          {currencySymbol}\r\n        </div>\r\n        <input\r\n          type=\"text\"\r\n          value={displayValue}\r\n          onChange={handleChange}\r\n          onFocus={handleFocus}\r\n          onBlur={handleBlur}\r\n          placeholder={defaultPlaceholder}\r\n          required={required}\r\n          className={`w-full pl-8 pr-4 py-2 bg-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 ${className}`}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":["CurrencyInput","value","onChange","currency","placeholder","label","required","className","type","displayValue","setDisplayValue","useState","isFocused","setIsFocused","useEffect","formatCurrency","currencySymbol","getCurrencySymbol","defaultPlaceholder","getCurrencyPlaceholder","jsxs","children","jsx","e","cleanedValue","target","replace","numericValue","parseNumberFromInput","formatted","onFocus","onBlur"],"mappings":"qJAqBO,MAAMA,EAA8C,EACzDC,QACAC,WACAC,WACAC,cACAC,QACAC,YAAW,EACXC,YAAY,GACZC,OAAO,YAEP,MAAOC,EAAcC,GAAmBC,WAAS,KAC1CC,EAAWC,GAAgBF,YAAS,GAG3CG,EAAAA,UAAU,KACRJ,EAAgBT,EAAQ,EAAIc,EAAed,EAAOE,GAAY,KAC7D,CAACF,EAAOE,IAEL,MA8BAa,EAAiBC,EAAkBd,GAEnCe,EACJd,GAAee,EAAuBhB,EAAUK,GAGhD,OAAAY,EAAAA,KAAC,MAAI,CAAAb,UAAU,WACZc,SAAA,CAAAhB,GACEiB,EAAAA,IAAA,QAAA,CAAMf,UAAU,iCAAkCc,SAAMhB,IAE3De,EAAAA,KAAC,MAAI,CAAAb,UAAU,WACbc,SAAA,CAACC,EAAAA,IAAA,MAAA,CAAIf,UAAU,uFACZc,SACHL,IACAM,EAAAA,IAAC,QAAA,CACCd,KAAK,OACLP,MAAOQ,EACPP,SA/CcqB,IACd,MAGAC,EAHaD,EAAEE,OAAOxB,MAGIyB,QAAQ,WAAY,IAC9CC,EAAeC,EAAqBJ,GAGtC,GAAiB,KAAjBA,GAAwC,IAAjBG,EACzBjB,EAAgB,IAChBR,EAAS,OACJ,CACC,MAAA2B,EAAYd,EAAeY,EAAcxB,GAC/CO,EAAgBmB,GAChB3B,EAASyB,EACX,GAiCMG,QA9BY,KAClBjB,GAAa,IA8BPkB,OA3BW,KACjBlB,GAAa,GAETZ,EAAQ,GACMS,EAAAK,EAAed,EAAOE,KAwBlCC,YAAac,EACbZ,WACAC,UAAW,iGAAiGA"}