{"version":3,"file":"PortfolioList-2772b6a7.js","sources":["../../src/components/ErrorMessage.tsx","../../src/pages/PortfolioList.tsx"],"sourcesContent":["import React from \"react\";\r\n\r\ninterface ErrorMessageProps {\r\n  message: string;\r\n  onRetry?: () => void;\r\n  className?: string;\r\n}\r\n\r\nexport const ErrorMessage: React.FC<ErrorMessageProps> = ({\r\n  message,\r\n  onRetry,\r\n  className = \"\",\r\n}) => {\r\n  return (\r\n    <div className={`bg-red-900/50 text-red-400 p-4 rounded ${className}`}>\r\n      <p className=\"mb-2\">{message}</p>\r\n      {onRetry && (\r\n        <button\r\n          onClick={onRetry}\r\n          className=\"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700 transition-colors\"\r\n        >\r\n          다시 시도\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { ErrorMessage } from \"../components/ErrorMessage\";\r\nimport { LoadingSpinner } from \"../components/LoadingSpinner\";\r\nimport { AccountService } from \"../services/accountService\";\r\nimport { PortfolioService } from \"../services/portfolioService\";\r\nimport { Account, Portfolio } from \"../types\";\r\nimport { formatCurrency } from \"../utils/currencyUtils\";\r\n\r\ninterface PortfolioWithStats extends Portfolio {\r\n  account?: Account;\r\n  positionCount: number;\r\n  totalValue: number;\r\n  totalCost: number;\r\n  returnRate: number;\r\n}\r\n\r\nexport const PortfolioList: React.FC = () => {\r\n  const [portfolios, setPortfolios] = useState<PortfolioWithStats[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<Error | null>(null);\r\n\r\n  useEffect(() => {\r\n    loadPortfoliosWithStats();\r\n  }, []);\r\n\r\n  const loadPortfoliosWithStats = async () => {\r\n    try {\r\n      const [portfoliosData, accounts] = await Promise.all([\r\n        PortfolioService.getAll(),\r\n        AccountService.getAll(),\r\n      ]);\r\n\r\n      const portfoliosWithStats: PortfolioWithStats[] = await Promise.all(\r\n        portfoliosData.map(async (portfolio) => {\r\n          const account = accounts.find((a) => a.id === portfolio.accountId);\r\n          const summary = await PortfolioService.getPortfolioSummary(\r\n            portfolio.id!\r\n          );\r\n\r\n          return {\r\n            ...portfolio,\r\n            account,\r\n            positionCount: summary.positions.length,\r\n            totalValue: summary.totalValue,\r\n            totalCost: summary.totalCost,\r\n            returnRate: summary.returnRate,\r\n          };\r\n        })\r\n      );\r\n\r\n      setPortfolios(portfoliosWithStats);\r\n    } catch (err) {\r\n      console.error(\"포트폴리오 데이터 로딩 중 오류:\", err);\r\n      setError(err as Error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <div className=\"flex justify-center items-center h-64\">\r\n          <LoadingSpinner />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <ErrorMessage\r\n          message={error.message}\r\n          onRetry={loadPortfoliosWithStats}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n      <div className=\"max-w-4xl mx-auto\">\r\n        <div className=\"flex justify-between items-center mb-8\">\r\n          <h1 className=\"text-2xl font-bold\">포트폴리오</h1>\r\n          <Link\r\n            to=\"/portfolios/new\"\r\n            className=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors\"\r\n          >\r\n            새 포트폴리오\r\n          </Link>\r\n        </div>\r\n\r\n        <div className=\"grid gap-4 md:grid-cols-2\">\r\n          {portfolios.map((portfolio) => (\r\n            <Link\r\n              key={portfolio.id}\r\n              to={`/portfolios/${portfolio.id}`}\r\n              className=\"block bg-gray-800 p-6 rounded-lg hover:bg-gray-700 transition-colors\"\r\n            >\r\n              <div className=\"flex justify-between items-start mb-4\">\r\n                <div className=\"flex-1\">\r\n                  <h2 className=\"text-lg font-medium mb-2\">\r\n                    {portfolio.name || \"이름 없음\"}\r\n                  </h2>\r\n                  <div className=\"text-sm text-gray-400 space-y-1\">\r\n                    <p className=\"flex items-center\">\r\n                      <span className=\"inline-block w-2 h-2 bg-blue-500 rounded-full mr-2\"></span>\r\n                      {portfolio.config?.period === \"LONG_TERM\" && \"장기 투자\"}\r\n                      {portfolio.config?.period === \"MID_TERM\" && \"중기 투자\"}\r\n                      {portfolio.config?.period === \"SHORT_TERM\" && \"단기 투자\"}\r\n                      {portfolio.config?.period === \"UNCATEGORIZED\" && \"미분류\"}\r\n                    </p>\r\n                    <p>{portfolio.account?.accountName || \"계좌 정보 없음\"}</p>\r\n                    <p className=\"text-xs\">\r\n                      {portfolio.account?.broker} •{\" \"}\r\n                      {portfolio.currency === \"KRW\" ? \"원화\" : \"달러\"} 계좌\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"text-right\">\r\n                  {portfolio.totalValue > 0 ? (\r\n                    <>\r\n                      <div className=\"text-lg font-bold text-blue-400\">\r\n                        ₩{formatCurrency(portfolio.totalValue, \"KRW\")}\r\n                      </div>\r\n                      <div\r\n                        className={`text-sm font-medium ${\r\n                          portfolio.returnRate >= 0\r\n                            ? \"text-green-400\"\r\n                            : \"text-red-400\"\r\n                        }`}\r\n                      >\r\n                        {portfolio.returnRate >= 0 ? \"+\" : \"\"}\r\n                        {portfolio.returnRate.toFixed(2)}%\r\n                      </div>\r\n                      <div className=\"text-xs text-gray-400\">\r\n                        {portfolio.positionCount}개 종목\r\n                      </div>\r\n                    </>\r\n                  ) : (\r\n                    <div className=\"text-sm text-gray-400\">포지션 없음</div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* 간단한 통계 */}\r\n              <div className=\"grid grid-cols-3 gap-4 pt-4 border-t border-gray-700\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-sm font-medium text-white\">\r\n                    {portfolio.positionCount}\r\n                  </div>\r\n                  <div className=\"text-xs text-gray-400\">종목 수</div>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-sm font-medium text-white\">\r\n                    ₩{formatCurrency(portfolio.totalCost, \"KRW\")}\r\n                  </div>\r\n                  <div className=\"text-xs text-gray-400\">투자금액</div>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <div\r\n                    className={`text-sm font-medium ${\r\n                      portfolio.returnRate >= 0\r\n                        ? \"text-green-400\"\r\n                        : \"text-red-400\"\r\n                    }`}\r\n                  >\r\n                    {portfolio.totalValue > 0 ? (\r\n                      <>\r\n                        {portfolio.returnRate >= 0 ? \"+\" : \"\"}₩\r\n                        {formatCurrency(\r\n                          Math.abs(portfolio.totalValue - portfolio.totalCost),\r\n                          \"KRW\"\r\n                        )}\r\n                      </>\r\n                    ) : (\r\n                      \"-\"\r\n                    )}\r\n                  </div>\r\n                  <div className=\"text-xs text-gray-400\">평가손익</div>\r\n                </div>\r\n              </div>\r\n            </Link>\r\n          ))}\r\n        </div>\r\n\r\n        {portfolios.length === 0 && (\r\n          <div className=\"text-center py-12 bg-gray-800 rounded-lg\">\r\n            <p className=\"text-gray-400 mb-4\">등록된 포트폴리오가 없습니다.</p>\r\n            <Link\r\n              to=\"/portfolios/new\"\r\n              className=\"inline-block px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors\"\r\n            >\r\n              첫 포트폴리오 만들기\r\n            </Link>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":["ErrorMessage","message","onRetry","className","jsxs","children","jsx","onClick","PortfolioList","portfolios","setPortfolios","useState","loading","setLoading","error","setError","useEffect","loadPortfoliosWithStats","async","portfoliosData","accounts","Promise","all","PortfolioService","getAll","AccountService","portfoliosWithStats","map","portfolio","account","find","a","id","accountId","summary","getPortfolioSummary","positionCount","positions","length","totalValue","totalCost","returnRate","err","LoadingSpinner","Link","to","name","config","period","accountName","broker","currency","Fragment","formatCurrency","toFixed","Math","abs"],"mappings":"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"}